CALL gds.graph.project(
    'graf_miejski',
    'Stop',
    'CONNECTED_TO',
    {
        nodeProperties: ['stop_lat', 'stop_lon'],
        relationshipProperties: 'avg_time'
    }
)



MATCH (start:Stop), (end:Stop)
WHERE start.stop_name CONTAINS "Wagonownia" 
  AND end.stop_name = "Główna"

CALL gds.shortestPath.astar.stream('graf_miejski', {
    sourceNode: start,
    targetNode: end,
    latitudeProperty: 'stop_lat',      // To automatycznie włącza heurystykę geograficzną
    longitudeProperty: 'stop_lon',     // To automatycznie włącza heurystykę geograficzną
    relationshipWeightProperty: 'avg_time'
})
YIELD index, sourceNode, targetNode, totalCost, nodeIds, costs, path

RETURN 
    totalCost AS Czas_Minuty,
    [nodeId IN nodeIds | gds.util.asNode(nodeId).stop_name] AS Trasa



CALL gds.graph.drop('graf_miejski', false)

